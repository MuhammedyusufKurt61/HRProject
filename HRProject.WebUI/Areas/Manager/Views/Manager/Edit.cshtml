@model PersonelUpdateViewModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<Personel> SignInManager

@{
    Layout = "_LayoutProfile";
    ViewData["Title"] = "Profile";

}



<div class="row">
    <div class="col-xl-12 order-xl-1">
        <div class="card">
            <form method="POST" asp-controller="Personel" asp-area="Personel" asp-action="Edit" enctype="multipart/form-data">
                <div class="card-header">
                    <div class="row align-items-center">
                        <div class="col-12">
                            <h3 class="mb-0">KULLANICI GÜNCELLEME SAYFASI</h3>
                        </div>
                    </div>
                </div>
                <div class="card-body">                   
                    <div class="pl-lg-4">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item" style="font-weight:bolder">Email Adresi</li>
                                        <li class="list-group-item">@Model.Email</li>
                                    </ul>
                                </div>
                                <div class="form-group">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item" style="font-weight:bolder">Departman</li>
                                        <li class="list-group-item">@Model.Department</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-4 d-flex justify-content-end">
                                <div class="">
                                    <img src="~/personelImages/@Model.PhotoPath" alt="Images Not Found" class="rounded" width="175px" height="175px">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item" style="font-weight:bolder">Adı ve Soyadı</li>
                                        <li class="list-group-item">@Model.FullName</li>
                                    </ul>
                                </div>
                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-email">Email adresi</label>
                                    <input style="background-color:white" asp-for="Email" type="text" id="input-email" class="form-control" placeholder="jesse@example.com" readonly>
                                </div>
                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-job">Email adresi</label>
                                    <input style="background-color:white" asp-for="Job" type="text" id="input-job" class="form-control" placeholder="jesse@example.com" readonly>
                                </div>

                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-department">Email adresi</label>
                                    <input style="background-color:white" asp-for="Department" type="text" id="input-department" class="form-control" placeholder="jesse@example.com" readonly>
                                </div>
                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-photo">Email adresi</label>
                                    <input style="background-color:white" asp-for="PhotoPath" type="text" id="input-photo" class="form-control" placeholder="jesse@example.com" readonly>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-tc">TC Kimlik No</label>
                                    <input style="background-color:white" asp-for="TC" type="text" id="input-tc" class="form-control" placeholder="TC" readonly>
                                </div>
                                <div class="form-group">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item" style="font-weight:bolder">TC Kimlik No</li>
                                        <li class="list-group-item">@Model.TC</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group" hidden>
                                    <label class="form-control-label" for="input-fullname" style="font-weight:bolder">İsim Soyisim</label>
                                    <input style="background-color:white" asp-for="FullName" type="text" id="input-fullname" class="form-control" placeholder="FirstName Surname" readonly>
                                </div>
                            </div>
                            <div class="col-lg-6" hidden>
                                <div class="form-group">
                                    <label class="form-control-label" for="input-birthplace" style="font-weight:bolder">Doğum Yeri</label>
                                    <input style="background-color:white" asp-for="BirthPlace" type="text" id="input-birthplace" class="form-control" placeholder="BirthPlace" readonly>
                                </div>
                                <div class="form-group">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">Doğum Yeri</li>
                                        <li class="list-group-item">@Model.BirthPlace</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group" hidden>
                                <label class="form-control-label" for="input-username" style="font-weight:bolder">Kullanıcı Adı</label>
                                <input style="background-color:white" asp-for="UserName" type="text" id="input-username" class="form-control" placeholder="BirthPlace" readonly>
                            </div>
                            <div class="form-group col-lg-6">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item" style="font-weight:bolder">Kullanıcı Adı</li>
                                    <li class="list-group-item">@Model.UserName</li>
                                </ul>
                            </div>
                            <div class="form-group col-lg-6">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item" style="font-weight:bolder">Meslek</li>
                                    <li class="list-group-item">@Model.Job</li>
                                </ul>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6" id="alert">
                                <div class="form-group">
                                    <label class="form-control-label" for="input-address" style="font-weight:bolder">Telefon Numarası <span style="font-weight:300">Ör: 0(987) 654-1234</span> </label>
                                    <input style="background-color:white; border-color:#2dce89 #2dce89 #2dce89 #2dce89" asp-for="PhoneNumber" type="tel" id="input-phonenumber" class="form-control custom-control" placeholder="PhoneNumber">
                                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <label for="formFileSm" class="form-label" style="font-weight:bolder">Personel Resim</label>
                                    <input id="photoChanger" class="form-control btn btn-primary" asp-for="Photo" type="file" accept=".jpg,.jpeg,.png" onchange="validateFileType()">
                                    <script type="text/javascript">
                                        function validateFileType() {
                                            var photoChanger = document.getElementById("photoChanger").value;
                                            var idxDot = photoChanger.lastIndexOf(".") + 1;
                                            var extFile = photoChanger.substr(idxDot, photoChanger.length).toLowerCase();
                                            if (extFile == "jpg" || extFile == "jpeg" || extFile == "png") {
                                            } else {
                                                alertify.error("Sadece JPEG, JPG veya PNG dosya türleri yüklenebilir.");
                                                $('#photoChanger').val('');
                                            }
                                        }
                                    </script>
                                </div>
                                <div class="form-group d-inline-block">
                                    <button type="submit" asp-action="Edit" asp-area="Manager" asp-controller="Manager" class="btn btn-success ">Kaydet</button>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-control-label" for="input-address" style="font-weight:bolder">Adres</label>
                                    <textarea style="resize:none; border-color:#2dce89 #2dce89 #2dce89 #2dce89;" rows="6" fixed asp-for="Address" id="input-address" class="form-control custom-control" max-height="150px"></textarea>
                                    <span asp-validation-for="Address" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="row align-items-center">
                        <div class="col-12 text-center">
                            <a asp-action="Details" asp-area="Manager" asp-controller="Manager" type="submit" class="btn btn-md btn-primary">
                                Detay Sayfasına Git
                            </a>
                            <a asp-controller="Manager" asp-area="Manager" asp-action="Index" type="submit" class="btn btn-md btn-success">
                                Anasayfaya Git
                            </a>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
@section scripts{

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://rawgit.com/RobinHerbots/jquery.inputmask/3.x/dist/jquery.inputmask.bundle.js"></script>

    <script>   
        $('#input-phonenumber').inputmask("9(999) 999-9999");

        $('#photoChanger').bind('change', function () {
            if (this.files[0].size > 5242880) {
                alertify.error('Yüklemeye çalıştığınız dosya boyutu 5Mb den küçük olmalıdır.')
                this.value = ""
            }
        });
    </script>
 }